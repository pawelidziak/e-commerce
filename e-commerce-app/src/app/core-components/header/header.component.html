<div class="my-toolbar" [ngClass]="{'my-toolbar-small-devices': hideSidenav, 'my-toolbar-big-devices': !hideSidenav}">

  <button mat-button fxHide fxShow.sm="true" (click)="sideNav.toggle()">
    <mat-icon>menu</mat-icon>
  </button>

  <span fxHide.xs="true" class="spacer-vertically"></span>

  <button mat-button fxHide fxShow.xs="true" (click)="sideNav.toggle()">
    <mat-icon>menu</mat-icon>
  </button>

  <button mat-button *ngIf="!searchInputFocused" (click)="searchInputFocused = true">
    <mat-icon>search</mat-icon>
    <span fxHide.xs="true">Search</span>
  </button>

  <form class="search-form" *ngIf="searchInputFocused">
    <mat-form-field class="full-width" floatPlaceholder="never">
      <input placeholder="Search" matInput [formControl]="myControl" [matAutocomplete]="auto">
      <mat-autocomplete #auto [displayWith]="displayFn">
        <div *ngFor="let option of filteredOptions | async; let i=index">
          <mat-option *ngIf="i<10" [value]="option">
            {{ option.title }}
          </mat-option>
        </div>
      </mat-autocomplete>
    </mat-form-field>
    <button mat-button (click)="searchInputFocused = false" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </form>


  <button mat-button (click)="cardNav.toggle()">
    <mat-icon>shopping_cart</mat-icon>
    <span fxHide.xs="true">Cart</span>
    <span *ngIf="_cardService.orders.length > 0">({{_cardService.orders.length}} items)</span>
    <span *ngIf="_cardService.orders.length === 0">(empty)</span>
  </button>

  <button mat-button *ngIf="!_authService.authenticated" (click)="openAuthDialog()">
    <mat-icon>perm_identity</mat-icon>
    <span fxHide.xs="true">Login</span>
  </button>

  <button mat-button [matMenuTriggerFor]="userSettings" *ngIf="_authService.authenticated">
    <mat-icon class="text-right">account_circle</mat-icon>
    <span fxHide.xs="true">{{_authService.currentUserDisplayName}}</span>
    <mat-icon fxShow fxHide.xs="true">keyboard_arrow_down</mat-icon>
  </button>

</div>

<!-- menu options -->
<mat-menu #userSettings="matMenu">
  <div mat-menu-item class="text-center">
    Avatar
  </div>
  <button mat-menu-item [routerLink]="['/profile']">
    <mat-icon>perm_identity</mat-icon>
    <span>Profile</span>
  </button>
  <button mat-menu-item>
    <mat-icon>settings</mat-icon>
    <span>Settings</span>
  </button>
  <button mat-menu-item (click)="logout()">
    <mat-icon>exit_to_app</mat-icon>
    <span>Logout</span>
  </button>
</mat-menu>
